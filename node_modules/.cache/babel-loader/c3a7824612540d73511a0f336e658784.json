{"ast":null,"code":"var _jsxFileName = \"/home/luis/Documents/live/barcelove-client/src/features/users/Register.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from 'react';\nimport { useRegisterUserMutation } from '../auth/authApiSlice';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheck, faTimes, faInfoCircle } from '@fortawesome/free-solid-svg-icons';\nimport { Link, useNavigate } from 'react-router-dom'; // Import useNavigate\nimport './formStyle.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst USER_REGEX = /^[A-z][A-z0-9-_]{3,23}$/;\nconst PWD_REGEX = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%]).{8,24}$/;\nconst Register = () => {\n  _s();\n  const userRef = useRef();\n  const errRef = useRef();\n  const [username, setUsername] = useState('');\n  const [validName, setValidName] = useState(false);\n  const [userFocus, setUserFocus] = useState(false);\n  const [password, setPassword] = useState('');\n  const [validPwd, setValidPwd] = useState(false);\n  const [pwdFocus, setPwdFocus] = useState(false);\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [validMatch, setValidMatch] = useState(false);\n  const [matchFocus, setMatchFocus] = useState(false);\n  const [email, setEmail] = useState('');\n  const [roles] = useState(['Manager']); // Default role\n\n  const [errMsg, setErrMsg] = useState('');\n  const [success, setSuccess] = useState(false);\n  const [registerUser, {\n    isLoading\n  }] = useRegisterUserMutation();\n  const navigate = useNavigate(); // Initialize useNavigate\n\n  useEffect(() => {\n    userRef.current.focus();\n  }, []);\n  useEffect(() => {\n    setValidName(USER_REGEX.test(username));\n  }, [username]);\n  useEffect(() => {\n    setValidPwd(PWD_REGEX.test(password));\n    setValidMatch(password === confirmPassword);\n  }, [password, confirmPassword]);\n  useEffect(() => {\n    setErrMsg('');\n  }, [username, password, confirmPassword]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!validName || !validPwd || !validMatch) {\n      setErrMsg(\"Invalid Entry\");\n      return;\n    }\n    try {\n      await registerUser({\n        username,\n        password,\n        email,\n        roles\n      }).unwrap();\n      setSuccess(true);\n      // Redirect to ConfirmEmail component\n      navigate('/confirmEmail');\n    } catch (err) {\n      if (!(err !== null && err !== void 0 && err.data)) {\n        setErrMsg('No Server Response');\n      } else {\n        setErrMsg('Registration Failed');\n      }\n      errRef.current.focus();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: success ? /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Success!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Check your email to verify your account.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        ref: errRef,\n        className: errMsg ? \"errmsg\" : \"offscreen\",\n        \"aria-live\": \"assertive\",\n        children: errMsg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: isLoading || !validName || !validPwd || !validMatch,\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Already registered?\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 44\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"line\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }, this)\n  }, void 0, false);\n};\n_s(Register, \"Mb5hpGJUgAu5Xo8kwlCZcW1a7C0=\", false, function () {\n  return [useRegisterUserMutation, useNavigate];\n});\n_c = Register;\nexport default Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useRef","useState","useEffect","useRegisterUserMutation","FontAwesomeIcon","faCheck","faTimes","faInfoCircle","Link","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","USER_REGEX","PWD_REGEX","Register","_s","userRef","errRef","username","setUsername","validName","setValidName","userFocus","setUserFocus","password","setPassword","validPwd","setValidPwd","pwdFocus","setPwdFocus","confirmPassword","setConfirmPassword","validMatch","setValidMatch","matchFocus","setMatchFocus","email","setEmail","roles","errMsg","setErrMsg","success","setSuccess","registerUser","isLoading","navigate","current","focus","test","handleSubmit","e","preventDefault","unwrap","err","data","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","className","onSubmit","disabled","to","_c","$RefreshReg$"],"sources":["/home/luis/Documents/live/barcelove-client/src/features/users/Register.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport { useRegisterUserMutation } from '../auth/authApiSlice';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheck, faTimes, faInfoCircle } from '@fortawesome/free-solid-svg-icons';\nimport { Link, useNavigate } from 'react-router-dom'; // Import useNavigate\nimport './formStyle.css';\n\nconst USER_REGEX = /^[A-z][A-z0-9-_]{3,23}$/;\nconst PWD_REGEX = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%]).{8,24}$/;\n\nconst Register = () => {\n    const userRef = useRef();\n    const errRef = useRef();\n    const [username, setUsername] = useState('');\n    const [validName, setValidName] = useState(false);\n    const [userFocus, setUserFocus] = useState(false);\n\n    const [password, setPassword] = useState('');\n    const [validPwd, setValidPwd] = useState(false);\n    const [pwdFocus, setPwdFocus] = useState(false);\n\n    const [confirmPassword, setConfirmPassword] = useState('');\n    const [validMatch, setValidMatch] = useState(false);\n    const [matchFocus, setMatchFocus] = useState(false);\n\n    const [email, setEmail] = useState('');\n    const [roles] = useState(['Manager']); // Default role\n\n    const [errMsg, setErrMsg] = useState('');\n    const [success, setSuccess] = useState(false);\n\n    const [registerUser, { isLoading }] = useRegisterUserMutation();\n\n    const navigate = useNavigate(); // Initialize useNavigate\n\n    useEffect(() => {\n        userRef.current.focus();\n    }, []);\n\n    useEffect(() => {\n        setValidName(USER_REGEX.test(username));\n    }, [username]);\n\n    useEffect(() => {\n        setValidPwd(PWD_REGEX.test(password));\n        setValidMatch(password === confirmPassword);\n    }, [password, confirmPassword]);\n\n    useEffect(() => {\n        setErrMsg('');\n    }, [username, password, confirmPassword]);\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        if (!validName || !validPwd || !validMatch) {\n            setErrMsg(\"Invalid Entry\");\n            return;\n        }\n        try {\n            await registerUser({ username, password, email, roles }).unwrap();\n            setSuccess(true);\n            // Redirect to ConfirmEmail component\n            navigate('/confirmEmail');\n        } catch (err) {\n            if (!err?.data) {\n                setErrMsg('No Server Response');\n            } else {\n                setErrMsg('Registration Failed');\n            }\n            errRef.current.focus();\n        }\n    };\n\n    return (\n        <>\n            {success ? (\n                <section>\n                    <h1>Success!</h1>\n                    <p>Check your email to verify your account.</p>\n                </section>\n            ) : (\n                <section>\n                    <p ref={errRef} className={errMsg ? \"errmsg\" : \"offscreen\"} aria-live=\"assertive\">{errMsg}</p>\n                    <h1>Register</h1>\n                    <form onSubmit={handleSubmit}>\n                        {/* Username input */}\n                        {/* ... [rest of your form fields] */}\n                        \n                        <button disabled={isLoading || !validName || !validPwd || !validMatch}>Register</button>\n                    </form>\n                    <p>\n                        Already registered?<br />\n                        <span className=\"line\">\n                        <Link to=\"/login\">Login</Link>\n                        </span>\n                    </p>\n                </section>\n            )}\n        </>\n    );\n};\n\nexport default Register;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}